

  ////////////////////////////////////////
  //
  // INDEX

  // plugin.tx_browser_pi1
  //    marker
  //    views
  //      601: +Org: Department
  //    _LOCAL_LANG



  ////////////////////////////////////////
  //
  // plugin.tx_browser_pi1

plugin.tx_browser_pi1 {
  
  template {
    extensions {
      org {
        department {
          name      = Org: Department
          file      = EXT:org/res/html/department/601/default.tmpl
          csvViews  = 601
        }
      }
    }
  }

  views {
    list {
      601 = +Org: Department
      601 {
        name    = +Org: Department
        showUid = departmentUid
        autoconfig < plugin.tx_browser_pi1.autoconfig
        autoconfig {
          relations.csvDontUseFields = tx_org_department.fe_users
        }
        select (
          tx_org_department.title,
          tx_org_department.telephone,
          tx_org_department.fax,
          tx_org_department.email,
          fe_users.first_name,
          fe_users.last_name,
          tx_org_headquarters.mail_postcode,
          tx_org_headquarters.mail_city,
          tx_org_headquarters.mail_address 
        )
        groupBy (
          tx_org_departmentcat.title
        )
        orderBy (
          tx_org_departmentcat.sorting, tx_org_department.sorting
        )
        filter {
          tx_org_departmentcat {
            title < plugin.tx_browser_pi1.displayList.master_templates.selectbox
            title {
              first_item {
                stdWrap {
                  //data = LLL:EXT:org/locallang_db.xml:tx_org_departmentcat.title
                  data >
                  value   = All Groups
                  lang.de = Alle Gruppen
                }
              }
              wrap = <span class="selectbox">|</span>
              wrap {
                item {
                  stdWrap {
                    crop = 30 | ... | 1
                  }
                }
              }
            }
          }
          tx_org_headquarters {
            title < plugin.tx_browser_pi1.displayList.master_templates.selectbox
            title {
              first_item {
                stdWrap {
                  //data = LLL:EXT:org/locallang_db.xml:tx_org_newscat.title
                  data >
                  value   = All Buildings
                  lang.de = Alle Gebäude
                }
              }
              wrap = <span class="selectbox">|</span>
              wrap {
                item {
                  stdWrap {
                    crop = 30 | ... | 1
                  }
                }
              }
            }
          }
        }
          // marker and subparts will replaced in the HTML template before data handling
          // #43627, 121205, dwildt
        htmlSnippets =
        htmlSnippets {
          marker {
            filter = TEXT
            filter {
              value (
              <div class="filter">
                ###TX_ORG_DEPARTMENTCAT.TITLE###
                ###TX_ORG_HEADQUARTERS.TITLE###
              </div>
)
            }
          }
          subparts {
            listview = TEXT
            listview {
              value (
            <div id="c###TT_CONTENT.UID###-listview-###MODE###" class="###VIEW###view ###VIEW###view-content ###VIEW###view-###MODE### ###VIEW###view-content-###MODE###">
              <!-- ###LISTBODY### begin --><!-- ###LISTBODYITEM### begin -->
              <div class="record01">
                <p>
                  ###SOCIALMEDIA_BOOKMARKS### ###TX_ORG_DEPARTMENT.TITLE###
                </p>
              </div>
              <div class="cleaner">&nbsp;</div><!-- ###LISTBODYITEM### end --><!-- ###LISTBODY### end -->
              </div> <!-- /listview -->
)
            }
          }
        }
      }
    }
    single {
      601 = +Org: Department
      601 {
        autoconfig < plugin.tx_browser_pi1.autoconfig
        autoconfig {
          relations.csvDontUseFields = tx_org_department.fe_users
        }
        marker < plugin.tx_browser_pi1.marker
        marker {
          my_manager = TEXT
          my_manager {
            value = Manager
            lang {
              de = Leitung
              en = Manager
            }
            noTrimWrap = ||: |
          }
          my_listview_page = TEXT
          my_listview_page {
            value = All Departments &raquo;
            lang.de = Alle Abteilungen &raquo; 
            typolink {
              parameter = {$plugin.org.pages.department}
              title {
                value = All Departments
                lang.de = Alle Abteilungen
              }
            }
          }
          my_singleview_title = TEXT
          my_singleview_title {
            value   = Department
            lang.de = Abteilung
            wrap    = <div class="header01">|</div>
          }
        }
        select (
          tx_org_department.title,
          tx_org_department.telephone,
          tx_org_department.fax,
          tx_org_department.email,
          tx_org_department.url,

          tx_org_department.documents_from_path,
          tx_org_department.documents,
          tx_org_department.documentslayout,
          tx_org_department.documentscaption,
          tx_org_department.documentssize, 

          tx_org_department.image,
          tx_org_department.imagecaption,
          tx_org_department.imageseo,
          tx_org_department.imagewidth,
          tx_org_department.imageheight,
          tx_org_department.imageorient,
          tx_org_department.imagecols,
          tx_org_department.imageborder,
          tx_org_department.image_frames,
          tx_org_department.image_link,
          tx_org_department.image_zoom,
          tx_org_department.image_noRows,
          tx_org_department.image_effects,
          tx_org_department.image_compression,

          tx_org_department.keywords,
          tx_org_department.description,
          
          fe_users.title,
          fe_users.first_name,
          fe_users.last_name,
          fe_users.uid,
          
          tx_org_headquarters.mail_postcode,
          tx_org_headquarters.mail_city,
          tx_org_headquarters.mail_address 
        )
        fe_users {
          first_name = COA
          first_name {
            if {
              isTrue = ###FE_USERS.TITLE######FE_USERS.FIRST_NAME######FE_USERS.LAST_NAME###
            }
            20 = TEXT
            20 {
              if {
                isTrue = ###FE_USERS.TITLE###
              }
              value = ###FE_USERS.TITLE###
              noTrimWrap = || |
            }
            21 = TEXT
            21 {
              if {
                isTrue = ###FE_USERS.FIRST_NAME###
              }
              value = ###FE_USERS.FIRST_NAME###
              noTrimWrap = || |
            }
            22 = TEXT
            22 {
              if {
                isTrue = ###FE_USERS.LAST_NAME###
              }
              value = ###FE_USERS.LAST_NAME###
              noTrimWrap = || |
            }
            30 = TEXT
            30 {
              value = more
              lang.de = Details
              typolink {
                parameter = {$plugin.org.pages.staff}
                parameter {
                  insertData = 1
                }
                additionalParams = &tx_browser_pi1[staffUid]=###FE_USERS.UID###
                useCacheHash = 1
              }
            }
          }
        }
        tx_org_department {
          documents = COA
          documents {
              // title
            10 = TEXT
            10 {
              if.isTrue = ###TX_ORG_DEPARTMENT.DOCUMENTS######TX_ORG_DEPARTMENT.DOCUMENTS_FROM_PATH###
              value     = Documents
              lang.de   = Dokumente
              wrap      = <h2 class="department_documents">|</h2>
            }
              // documents
            20 < tt_content.uploads.20
            20 {
              userFunc = tx_browser_cssstyledcontent->render_uploads
              userFunc {
                  // Enable the DRS (you need devlog)
                drs = TEXT
                drs {
                  value = 0
                }
              }
              filePath >
              itemRendering {
                10 {
                  if {
                    isPositive.field >
                    isPositive = ###TX_ORG_DEPARTMENT.DOCUMENTSLAYOUT###
                  }
                }
                30 {
                  if {
                    isTrue.field >
                    isTrue = ###TX_ORG_DEPARTMENT.DOCUMENTSSIZE###
                  }
                }
              }
              tableField = tx_org_department.documents
              fields {
                from_path = ###TX_ORG_DEPARTMENT.DOCUMENTS_FROM_PATH###
                files     = ###TX_ORG_DEPARTMENT.DOCUMENTS###
                caption   = ###TX_ORG_DEPARTMENT.DOCUMENTSCAPTION###
                layout    = ###TX_ORG_DEPARTMENT.DOCUMENTSLAYOUT###
              }
              stdWrap {
                if.isTrue = ###TX_ORG_DEPARTMENT.DOCUMENTS######TX_ORG_DEPARTMENT.DOCUMENTS_FROM_PATH###
              }
            }
          }
          telephone = COA
          telephone {
            if {
              isTrue = ###TX_ORG_DEPARTMENT.TELEPHONE######TX_ORG_DEPARTMENT.FAX######TX_ORG_DEPARTMENT.EMAIL######TX_ORG_DEPARTMENT.URL###
            }
            wrap = <p>|</p>
            10 = TEXT
            10 {
              if {
                isTrue = ###TX_ORG_DEPARTMENT.TELEPHONE###
              }
              value = phone
              lang.de = Tel.:
              noTrimWrap = || ###TX_ORG_DEPARTMENT.TELEPHONE###<br />|
            }
            11 = TEXT
            11 {
              if {
                isTrue = ###TX_ORG_DEPARTMENT.FAX###
              }
              value = fax
              lang.de = Fax:
              noTrimWrap = || ###TX_ORG_DEPARTMENT.FAX###<br />|
            }
            20 = TEXT
            20 {
              if {
                isTrue = ###TX_ORG_DEPARTMENT.EMAIL###
              }
              value = e-mail
              lang.de = E-Mail:
              noTrimWrap = || |
            }
            21 = TEXT
            21 {
              if {
                isTrue = ###TX_ORG_DEPARTMENT.EMAIL###
              }
              typolink {
                parameter = ###TX_ORG_DEPARTMENT.EMAIL###
              }
              wrap = |<br />
            }
            30 = TEXT
            30 {
              if {
                isTrue = ###TX_ORG_DEPARTMENT.URL###
              }
              value = Website
              lang.de = Website
              noTrimWrap = ||: |
            }
            31 = TEXT
            31 {
              if {
                isTrue = ###TX_ORG_DEPARTMENT.URL###
              }
              typolink {
                parameter = ###TX_ORG_DEPARTMENT.URL###
              }
            }
          }
            // title, address and image
          title < tt_content.image.20
          title {
            imgList.field >
            imgList = ###TX_ORG_DEPARTMENT.IMAGE###
            imgPath = uploads/tx_org/
            1 {
              file {
                width.field >
                width   = ###TX_ORG_DEPARTMENT.IMAGEWIDTH###
                height  = ###TX_ORG_DEPARTMENT.IMAGEHEIGHT###
              }
              altText.field                 >
              altText                       = ###TX_ORG_DEPARTMENT.IMAGESEO###
              titleText.field               >
              titleText                     = ###TX_ORG_DEPARTMENT.IMAGESEO###
              imageLinkWrap {
                ifEmpty {
                  typolink.parameter.field  >
                  typolink.parameter        = ###TX_ORG_DEPARTMENT.IMAGE_LINK###
                }
                typolink.parameter.field    >
                typolink.parameter          = ###TX_ORG_DEPARTMENT.IMAGE_LINK###
                enable.field                >
                enable                      = ###TX_ORG_DEPARTMENT.IMAGE_ZOOM###
                width                       = 1000;
                height                      = 800m;
                //JSwindow = 0
              }
            }
            textPos.field           >
            textPos                 = ###TX_ORG_DEPARTMENT.IMAGEORIENT###
            equalH                  >
            image_compression.field >
            image_compression       = ###TX_ORG_DEPARTMENT.IMAGE_COMPRESSION###
            image_effects.field     >
            image_effects           = ###TX_ORG_DEPARTMENT.IMAGE_EFFECTS###
            noRows.field            >
            noRows                  = ###TX_ORG_DEPARTMENT.IMAGE_NOROWS###
            cols.field              >
            cols                    = ###TX_ORG_DEPARTMENT.IMAGECOLS###
            border.field            >
            border                  = ###TX_ORG_DEPARTMENT.IMAGEBORDER###
            caption.1.field         >
            caption.1.value         = ###TX_ORG_DEPARTMENT.IMAGECAPTION###
            captionAlign.field      >
            captionAlign            = ###TX_ORG_DEPARTMENT.IMAGECAPTION_POSITION###
            layout {
              key.field        >
              key              = ###TX_ORG_DEPARTMENT.IMAGEORIENT###
              default.value    = <div class="csc-textpic csc-textpic-center csc-textpic-above###CLASSES###">###IMAGES###</div><div class="csc-textpic-clear"><!-- --></div>###TEXT###
            }
            stdWrap {
              prefixComment >
            }
              // title, address
            text {
              required  = 1
                // bodytext
              10 = TEXT
              10 {
                required  = 1
                value     = ###TX_ORG_DEPARTMENT.TITLE###
                wrap      = <h1 class="department_title">|</h1>
              }
              20 = COA
              20 {
                if.isTrue = ###TX_ORG_HEADQUARTERS.MAIL_POSTCODE######TX_ORG_HEADQUARTERS.MAIL_CITY######TX_ORG_HEADQUARTERS.MAIL_ADDRESS###
                wrap      = <p class="department_address">|</p>
                10 = TEXT
                10 {
                  if {
                    isTrue = ###TX_ORG_HEADQUARTERS.MAIL_POSTCODE###
                  }
                  value = ###TX_ORG_HEADQUARTERS.MAIL_POSTCODE###
                  noTrimWrap = || |
                }
                11 = TEXT
                11 {
                  if {
                    isTrue = ###TX_ORG_HEADQUARTERS.MAIL_CITY###
                  }
                  value = ###TX_ORG_HEADQUARTERS.MAIL_CITY###
                  noTrimWrap = ||, |
                }
                12 = TEXT
                12 {
                  if {
                    isTrue = ###TX_ORG_HEADQUARTERS.MAIL_ADDRESS###
                  }
                  value = ###TX_ORG_HEADQUARTERS.MAIL_ADDRESS###
                  noTrimWrap = || |
                }
                20 = TEXT
                20 {
                  value = more
                  lang.de = Details
                  typolink {
                    parameter = {$plugin.org.pages.headquarter}
                    parameter {
                      insertData = 1
                    }
                    additionalParams = &tx_browser_pi1[headquartersUid]=###TX_ORG_HEADQUARTERS.UID###
                    useCacheHash = 1
                  }
                }
              }
            }
          }
        }
          // marker and subparts will replaced in the HTML template before data handling
          // #43627, 121205, dwildt
        htmlSnippets =
        htmlSnippets {
          subparts {
            singleview = TEXT
            singleview {
              value (
<!-- ###AREA_FOR_AJAX_LIST_01### begin -->
        <div id="c###TT_CONTENT.UID###-singleview-###MODE###" class="singleview singleview-###MODE###">
          ###RECORD_BROWSER###
          <div class="ui-widget ui-corner-all">
            <div class="ui-widget-content ui-corner-all">
              <!-- ###SINGLEBODY### begin --><!-- ###SINGLEBODYROW### begin -->
              <div class="socialbookmarks">
                ###SOCIALMEDIA_BOOKMARKS###
              </div>
              ###TX_ORG_DEPARTMENT.TITLE###
              <p>
                ###MY_MANAGER###: ###FE_USERS.FIRST_NAME###
              </p>
              ###TX_ORG_DEPARTMENT.TELEPHONE###
              ###TX_ORG_DEPARTMENT.DOCUMENTS###
              <!-- ###SINGLEBODYROW### end --><!-- ###SINGLEBODY### end -->
            </div>
<!-- ###AREA_FOR_AJAX_LIST_01### end -->
            <!-- ###BACKBUTTON### begin -->
            <p class="backbutton">
              ###BUTTON###
            </p>
          <!-- ###BACKBUTTON### end -->
<!-- ###AREA_FOR_AJAX_LIST_02### begin -->
          </div>
        </div>
<!-- ###AREA_FOR_AJAX_LIST_02### end -->
)
            }
          }
        }
      }
    }
  }
  
  _LOCAL_LANG {
    default {
      list_mode_601               = Departments
      list_mode_601_titleTag      = TYPO3-Organiser: Department
      list_mode_601_keywords      = TYPO3, Organiser, Departments
      list_mode_601_summary       = Departments presented by TYPO3-Organiser
      single_mode_601_titleTag    = Department: ###TX_ORG_DEPARTMENT.TITLE###
      single_mode_601_keywords    = ###TX_ORG_DEPARTMENT.KEYWORDS###
      single_mode_601_summary     = ###TX_ORG_DEPARTMENT.DESCRIPTION###
    }
    de {
      list_mode_601               = Abteilungen
      list_mode_601_titleTag      = TYPO3-Organiser: Abteilung
      list_mode_601_keywords      = Abteilung, TYPO3, Organiser
      list_mode_601_summary       = Abteilungen, präsentiert vom TYPO3 Organiser
      single_mode_601_titleTag    = Abteilung: ###TX_ORG_DEPARTMENT.TITLE###
      single_mode_601_keywords    = ###TX_ORG_DEPARTMENT.KEYWORDS###
      single_mode_601_summary     = ###TX_ORG_DEPARTMENT.DESCRIPTION###
    }
  }
}
  // plugin.tx_browser_pi1



  ////////////////////////////////////////
  //
  // Header Comment

page.config.headerComment (
        TYPO3-Programmierung: die-netzmacher.de
)
  // Header Comment

